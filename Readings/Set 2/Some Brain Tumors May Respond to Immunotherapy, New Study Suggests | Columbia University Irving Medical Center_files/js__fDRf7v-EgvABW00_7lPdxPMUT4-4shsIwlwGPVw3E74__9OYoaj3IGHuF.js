'use strict';(function cumcScripts($,Drupal){Drupal.behaviors.cumcTableWrapper={attach:function attach(){var _this2=this,resizeOverflowTimer=0,wrapperClass='table-wrapper';$('.cb-content').find('table').once('table-respond',function(index,element){$(element).find('> caption');if($(element).parents('table-responsive').length===0){if($(element).find('> caption').length){wrapperClass='table-wrapper has-caption'}else wrapperClass='table-wrapper';$(element).wrap('<div class="'+wrapperClass+'"><div class="table-responsive"></div></div>')}});$(window).resize(function(){clearTimeout(resizeOverflowTimer);resizeOverflowTimer=setTimeout(function(){_this2.toggleOverflow('table-responsive')},100)})},toggleOverflow:function toggleOverflow(el){$('.'+el).each(function(index,element){if($(element).prop('scrollWidth')>$(element).outerWidth()){var $elementParent=$(element).parent(),$tableCaption=$(element).find('table > caption');$elementParent.addClass('has-overflow');if($tableCaption.length){var captionHeight=$tableCaption.outerHeight(true);$elementParent.css('padding-top',captionHeight+'px')}}else $(element).parent().removeClass('has-overflow').css('padding-top','')})}};Drupal.behaviors.cumcStickyWidget={attach:function attach(){var _this3=this;$(window).scroll(function(){_this3.stickyElement()}).scroll()},stickyElement:function stickyElement(){var $stickyItem=$('.node-type-cups-profile').find('.pane-jump-menu');if($stickyItem.length){var windowTop=$(window).scrollTop(),stickyItemContainerTop=$stickyItem.parent().offset().top;if(windowTop>stickyItemContainerTop){$stickyItem.removeClass('element--sticky--bottom').addClass('element--sticky').parent().addClass('has-sticky-element');var stickyItemBottom=$stickyItem.offset().top+$stickyItem.outerHeight(true),maxBottomOffset=$('.cb-content-area__main').offset().top+$('.cb-content-area__main').outerHeight();if(stickyItemBottom>maxBottomOffset)$stickyItem.addClass('element--sticky--bottom')}else $stickyItem.removeClass('element--sticky').removeClass('element--sticky--bottom').parent().removeClass('has-sticky-element')}}};Drupal.behaviors.cumcJumpMenuScrollspy={attach:function attach(context){var _this4=this,$jumpMenu=$('.node-type-cups-profile').find('.pane-jump-menu');if($jumpMenu.length&&$(window).width()>768){$jumpMenu.on('click','a',function(){$jumpMenu.find('a.active').removeClass('active');$(_this4).addClass('active')});$('.node-type-cups-profile .cups-profile-section',context).each(function(index,el){var $this=$(el),offset=$this.offset(),section=$this.find('.pane-title').attr('id'),menuItemSelector='a[href="#'+section+'"]';$this.scrollspy({min:offset.top,max:offset.top+$this.height(),onEnter:function onEnter(){$jumpMenu.find('a.active').removeClass('active');$jumpMenu.find(menuItemSelector).addClass('active')}})})}}};Drupal.behaviors.cumcVideoRatio={attach:function attach(){var $videoWrapper=$('.file-video').find('.content');if($videoWrapper.length)$videoWrapper.each(function(index,el){var $iframe=$(el).find('iframe'),videoRatio=$iframe.attr('height')/$iframe.attr('width');$(el).css('padding-bottom',videoRatio*100+'%')})}};Drupal.behaviors.cumcMobileMenu={attach:function attach(){var _this=this;$('.pane-page-primary-links').once('menu-toggle',function(){$('<a/>',{class:'mobile-menu__toggle',href:'#',html:'<span>Open </span>Menu',role:'button','aria-controls':'cb-mobile-menu','aria-expanded':'false',click:function click(e){e.preventDefault();_this.toggleMenu()}}).prependTo($('.pane-page-primary-links'))});$(window).resize(function(){_this.moveSecondaryMenus()}).resize().scroll(function(){_this.scrollLock()}).scroll();$('.cb-content').click(function(){_this.toggleMenu(true)})},moveSecondaryMenus:function moveSecondaryMenus(){var $mobileMenu=$('.cb-primary-menu'),_this=this;if($('.mobile-menu__toggle').length&&$('.mobile-menu__toggle').css('display')!=='none'){if(!$mobileMenu.hasClass('mobile-menu')){$mobileMenu.addClass('mobile-menu').append($('.secondary-links')).find('ul').wrapAll('<div class="cb-mobile-menu" id="cb-mobile-menu"></div>');_this.addLinksToMobileMenu();$('body').addClass('mobile-menu-active')};_this.menuHeight()}else if($mobileMenu.hasClass('mobile-menu')){_this.toggleMenu(true);_this.keyboardSupport(false);_this.removeLinksFromMobileMenu();$('#cb-mobile-menu').find('.primary-links').unwrap();$mobileMenu.removeClass('mobile-menu');$('body').removeClass('mobile-menu-active')}},addLinksToMobileMenu:function addLinksToMobileMenu(){if($('body').hasClass('cb-flavor--sections')&&!$('.cb-primary-navigation').length){var $mainContainer=$('<div>',{class:'cb-container cb-primary-navigation'}),$innerContainer=$('<div>',{class:'cb-container__inner'});$('.cb-nameplate').find('.cb-primary-menu').appendTo($innerContainer);$innerContainer.appendTo($mainContainer);$mainContainer.appendTo('.cb-site-header')};if($('.cb-section-menu').length){$('.cb-primary-navigation').find('> .cb-container__inner').append($('.cb-primary-menu'));if($('.cb-section-menu > nav > .menu').length)$('.cb-section-menu > nav > .menu').addClass('main-menu').appendTo('.mobile-menu li.active-trail');if($('.cb-sidebar-menu > nav > .menu').length)$('.cb-sidebar-menu > nav > .menu').addClass('sidebar-menu').appendTo('.main-menu > li.active-trail')}else if($('.cb-sidebar-menu > nav > .menu').length){var $activeTrail=$('.mobile-menu').find('.primary-links li.active-trail'),$secondaryTrail=$('.mobile-menu').find('.secondary-links li.active-trail');if(!$activeTrail.length)if($secondaryTrail.length){$activeTrail=$secondaryTrail}else $activeTrail=$('.cb-mobile-menu');$('.cb-sidebar-menu > nav > .menu').addClass('sidebar-menu').appendTo($activeTrail)};if($('.cb-sidebar-menu--subsection').length){var $subsection=$('<ul>',{class:'subsection-menu'}),$subsectionHeader=$('<li>',{class:'subsection-header collapsed first'});$('.cb-sidebar-menu--subsection').hide().find('.pane-title a').appendTo($subsectionHeader);$('.sidebar-menu').appendTo($subsectionHeader);$subsectionHeader.prependTo($subsection);$subsection.appendTo('.primary-links > li.active-trail');$('.main-menu').hide()};if($('.breadcrumb').length)if(!$('.cb-sidebar-menu').length||$('.cb-sidebar-menu').length&&!$('.cb-sidebar-menu').children().length)if(!$('.mobile-menu').find('li.active').length){var $myTrail=$('.breadcrumb').find('ol'),$subsectionOrphan=$('<ul>',{class:'orphan-menu'});$myTrail.find('li:nth-last-child(2)').clone().appendTo($subsectionOrphan);$myTrail.find('li:last-child').clone().appendTo($subsectionOrphan.find('li')).wrap('<ul>');$subsectionOrphan.find('.breadcrumb__separator').remove();$subsectionOrphan.appendTo($('.mobile-menu').find('li.active-trail').first())}},removeLinksFromMobileMenu:function removeLinksFromMobileMenu(){if($('body').hasClass('cb-flavor--sections')&&!$('.cb-section-menu').length)if($('.cb-primary-navigation').length){$('.cb-primary-navigation').find('.cb-primary-menu').appendTo('.cb-nameplate .cb-panel-container');$('.cb-primary-navigation').remove()};if($('.cb-section-menu').length){$('.cb-nameplate').find('.cb-panel-container').append($('.cb-primary-menu'));$('.cb-page-conent').find('> .cb-container__inner').append($('.cb-content-area__aside-first'));if($('.main-menu').length)$('.main-menu').show().removeClass('main-menu').appendTo('.cb-section-menu nav');if($('.sidebar-menu').length)$('.sidebar-menu').removeClass('sidebar-menu').appendTo('.cb-sidebar-menu nav')}else{if($('.sidebar-menu').length)$('.sidebar-menu').removeClass('sidebar-menu').appendTo('.cb-sidebar-menu nav');$('.secondary-links').appendTo('.cb-utility-menu')};if($('.subsection-header').length){$('.cb-sidebar-menu--subsection').show();$('.cb-content-area__aside-first').append($('.cb-sidebar-menu--subsection'));$('.subsection-header > a').appendTo($('.cb-sidebar-menu--subsection > .pane-title'));$('.subsection-menu').remove()};$('.orphan-menu').remove()},scrollLock:function scrollLock(){var $mobileMenu=$('.cb-mobile-menu'),docScrollTop=$(document).scrollTop(),maxScrollBottom=void(0);if($('html').hasClass('scroll-lock')&&$mobileMenu.length){maxScrollBottom=$mobileMenu.offset().top+$mobileMenu.outerHeight();if(docScrollTop+$(window).height()>maxScrollBottom)$(document).scrollTop(maxScrollBottom-$(window).height())}},toggleMenu:function toggleMenu(){var closeOnly=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false,_this=this,menuIsOpen=void(0);if($('.pane-page-primary-links').hasClass('mobile-menu')){menuIsOpen=$('.mobile-menu').hasClass('mobile-menu--visible');if(menuIsOpen){$('.mobile-menu__toggle').attr('aria-expanded','false').find('span').html('Open');_this.keyboardSupport(false)}else if(!closeOnly){$('.mobile-menu__toggle').attr('aria-expanded','true').focus().find('span').html('Close');_this.keyboardSupport()};if(closeOnly&&menuIsOpen||!closeOnly){$('.cb-content').toggleClass('cb-content--inactive');$('.mobile-menu').toggleClass('mobile-menu--visible');$('html').toggleClass('scroll-lock')}}},menuHeight:function menuHeight(){var menuOffset=$('#cb-mobile-menu').offset().top,viewportHeight=$(window).height();$('#cb-mobile-menu').css('min-height',viewportHeight-menuOffset)},keyboardSupport:function keyboardSupport(){var enable=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true,_this=this,$menuLinks=$('.mobile-menu').find('a');if($menuLinks.length)if(enable){$menuLinks.first().on('keydown.tabtrap',function(e){if(e.keyCode===9&&e.shiftKey){e.preventDefault();$menuLinks.last().focus()}});$menuLinks.last().on('keydown.tabtrap',function(e){if(e.keyCode===9&&!e.shiftKey){e.preventDefault();$menuLinks.first().focus()}});$(document).on('keydown.menuclose',function(e){if(e.keyCode===27)_this.toggleMenu()})}else{$menuLinks.off('keydown.tabtrap');$(document).off('keydown.menuclose')}}};Drupal.behaviors.cumcCaptionWidth={attach:function attach(){var _this=this,resizeTimer=void(0);$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){_this.captionSize()},100)});$(window).load(function(){_this.captionSize()})},captionSize:function captionSize(){$('figure').each(function(index,el){var $caption=$(el).find('figcaption'),$img=$(el).find('img');if($caption.length)if($caption.width()!==$img.width()&&$img.width()!==0)$caption.css('width',$img.width()+'px')})}};Drupal.behaviors.cumcHeroAnchor={attach:function attach(){var _this=this,_settings={enabled:true,heroClass:'pane-hero',jumpTargetClass:'cb-feature-secondary',jumpLinkClass:'pane-hero__jump-link'};if(typeof Drupal.settings.toggleHeroJumpLink!=='undefined')if(!Drupal.settings.toggleHeroJumpLink)_settings.enabled=false;Drupal.behaviors.cumcRegionOverlap.attach();if($('.'+_settings.heroClass).parents().hasClass('cb-overlapped--bottom'))_settings.enabled=false;if(_settings.enabled)$('.'+_settings.heroClass).once('hero-anchor',function(){if(!$('.front').find('.'+_settings.heroClass+' .'+_settings.jumpLinkClass).length){$('<a/>',{class:_settings.jumpLinkClass,href:'#jump-target',html:'<span>'+Drupal.t('Jump to next section')+'</span>',tabindex:'-1','aria-hidden':'true',click:function click(e){e.preventDefault();_this.smoothScroll('.'+_settings.jumpLinkClass)}}).appendTo($('.front').find('.'+_settings.heroClass));$('.'+_settings.jumpTargetClass).attr('id','jump-target');if($('.front').length&&$('#jump-target').length)$(window).scroll(function(){_this.scrollOpacity('.'+_settings.jumpLinkClass,'#jump-target')}).scroll()}})},smoothScroll:function smoothScroll(el){var $targetItem=$($(el)[0].hash),dest=0;if($targetItem.length&&!$('.panels-ipe-editing').length){if($targetItem.offset().top>$(document).height()-$(window).height()){dest=$(document).height()-$(window).height()}else dest=$targetItem.offset().top;if($targetItem.data('scrolling')===undefined){$targetItem.data('scrolling',true);$('html,body').animate({scrollTop:dest},700,function(){$targetItem.focus();$targetItem.removeData('scrolling')})}}},scrollOpacity:function scrollOpacity(el,target){if(!$('.panels-ipe-editing').length){var topWindow=$(window).scrollTop(),targetOffset=$(target).offset().top,position=topWindow/targetOffset;position=1-position;$(el).css('opacity',position)}}};Drupal.behaviors.cumcShowMore={attach:function attach(){var _this5=this;if(typeof Drupal.settings.showMore!=='undefined'){var mySettings=Drupal.settings.showMore;for(var i=0;i<mySettings.length;i++)if(mySettings[i].class_id!==undefined){var $thisContainer=$(mySettings[i].class_id);$(mySettings[i].class_id).addClass('show-more-container');if(mySettings[i].object_name!==undefined)$thisContainer.data('object_name',mySettings[i].object_name);if(mySettings[i].show_limit!==undefined&&!isNaN(mySettings[i].show_limit))$thisContainer.attr('data-showlimit',mySettings[i].show_limit);if(mySettings[i].hide_limit!==undefined&&!isNaN(mySettings[i].hide_limit))$thisContainer.attr('data-hidelimit',mySettings[i].hide_limit);if(mySettings[i].show_count!==undefined){$thisContainer.data('show_count',mySettings[i].show_count)}else $thisContainer.data('show_count',false)}};if($('.show-more-container').length!==0)(function(){var $showMore=$('<a>',{class:'show-more show-more--more',href:'#'}).text('Show more').css({cursor:'pointer'}).click(function(e){e.preventDefault();_this5.toggleMore($(e.currentTarget))}),$showLess=$('<a>',{class:'show-more show-more--less',href:'#'}).text('Show less').css({display:'none',cursor:'pointer'}).click(function(e){e.preventDefault();_this5.toggleMore($(e.currentTarget))});$('.show-more-container').each(function(index,el){if(!$(el).hasClass('show-more-processed'))(function(){var showLimit=$(el).attr('data-showlimit'),hideLimit=$(el).attr('data-hidelimit'),classes=$(el).attr('class').split(/\s+/),showPatt=/show-limit-/,hidePatt=/hide-limit-/,patlmt=/\d$/;if(isNaN(showLimit)||isNaN(hideLimit))$.each(classes,function(classIndex,curclass){if(showPatt.test(curclass))showLimit=patlmt.exec(curclass);if(hidePatt.test(curclass))hideLimit=patlmt.exec(curclass)});showLimit=isNaN(showLimit)?3:showLimit;hideLimit=isNaN(hideLimit)?3:hideLimit;var tag=$(el).get(0).tagName==='DL'?'dt':'',kids=$(el).children(tag),objectName=$(el).data('object_name')!==undefined?' <span>'+$(el).data('object_name')+'</span>':'',hideCount=0;if(kids.length>Number(showLimit)+Number(hideLimit)-1){if(tag!=='')kids.not(':lt('+showLimit+')').nextUntil('dt').hide().addClass('is-more');kids.not(':lt('+showLimit+')').hide().addClass('is-more');hideCount=kids.not(':lt('+showLimit+')').length;if($(el).data('show_count')){$showMore.text('Show '+hideCount+' more');$showLess.text('Show '+hideCount+' less')};$(el).attr({'aria-live':'polite','aria-relevant':'additions removals'}).addClass('show-more-applied show-more--hidden').after($showMore.clone(true).append(objectName),$showLess.clone(true).append(objectName))};$(el).addClass('show-more-processed')})()})})()},toggleMore:function toggleMore(obj){obj.toggle(0);obj.next('.show-more').toggle(0).css('overflow','visible');obj.prev('.show-more').toggle(0).css('overflow','visible');obj.prevAll('.show-more-container:first').children('.is-more').slideToggle(400);obj.prevAll('.show-more-container:first').toggleClass('show-more--hidden').focus()}};Drupal.behaviors.cumcShowHide={attach:function attach(){if(typeof Drupal.settings.showHide!=='undefined'){var mySettings=Drupal.settings.showHide;this.initialize(mySettings)}},initialize:function initialize(settings){var _loop=function _loop(i){if(settings[i].class_id!==undefined)(function(){var $thisHidee=$(settings[i].class_id),minLength=settings[i].min_length!==undefined?settings[i].min_length:0;$thisHidee.each(function(index,element){$(element).once(function(){if(!minLength||$(element).text().length>100){$(element).addClass('show-hide');if(settings[i].button_text!==undefined)$(element).data('button_text',settings[i].button_text);if(settings[i].show_action!==undefined)$(element).data('show_action',settings[i].show_action);if(settings[i].hide_action!==undefined)$(element).data('hide_action',settings[i].hide_action);if(settings[i].descriptor!==undefined)$(element).data('descriptor',settings[i].descriptor);if(settings[i].descriptor_prefix!==undefined)$(element).data('descriptor_prefix',settings[i].descriptor_prefix);if(settings[i].before!==undefined){$(element).data('before',settings[i].before)}else $(element).data('before',true);if(settings[i].animated!==undefined){$(element).data('animated',settings[i].animated)}else $(element).data('animated',true);if(settings[i].closest_sibling!==undefined){$(element).data('closest',settings[i].closest_sibling)}else $(element).data('closest',false)}})})})()};for(var i=0;i<settings.length;i++)_loop(i);if($('.show-hide').length!==0)(function(){var $showHideButton=$('<button>',{class:'show-hide-controller'}).attr('aria-expanded','false').addClass('show-hide-controller--closed').click(function(e){Drupal.behaviors.cumcShowHide.showHide($(e.currentTarget))});$('.show-hide').each(function(index,el){if(!$(el).hasClass('show-hide-processed')){var hideeId=$(el).uniqueId().attr('id'),showAction=$(el).data('show_action')!==undefined?$(el).data('show_action'):'Show';showAction='<span class="show-hide__action">'+showAction+'</span>';var buttonText=$(el).data('button_text')!==undefined?' <span class="show-hide__text">'+$(el).data('button_text')+'</span>':'',$descriptor=void(0),descriptorClass=$(el).data('descriptor'),descriptorClasses=descriptorClass.split(' '),descriptorParent=descriptorClasses[0],descriptorChildren=descriptorClass.split(' ');descriptorChildren=descriptorChildren.length>1?descriptorChildren.splice(1).join(' '):'';if($(el).closest(descriptorParent).length||$(el).prevAll(descriptorParent).length)if(descriptorClasses.length>1){if($(el).data('closest')){$descriptor=$(el).prevAll(descriptorParent+':first').find(descriptorChildren)}else $descriptor=$(el).closest(descriptorParent).first().find(descriptorChildren).first()}else if($(el).data('closest')){$descriptor=$(el).prevAll(descriptorParent+':first')}else $descriptor=$(el).parent().find(descriptorClass);var descriptorPrefix=$(el).data('descriptor_prefix')!==undefined?$(el).data('descriptor_prefix')+' ':'',descriptorText=' <span class="show-hide__description">'+(descriptorPrefix+$descriptor.text())+'</span>',appendText=showAction+buttonText+descriptorText,$thisButton=$showHideButton.clone(true).attr('aria-controls',hideeId).append(appendText).uniqueId();$(el).hide().attr('aria-hidden','true').attr('aria-labelledby',$thisButton.attr('id')).addClass('show-hide-processed');if($(el).data('before')){$(el).before($thisButton)}else $(el).after($thisButton)}})})()},showHide:function showHide(obj){var $hidee=$('#'+obj.attr('aria-controls')),showAction=$hidee.data('show_action')!==undefined?$hidee.data('show_action'):'Show',hideAction=$hidee.data('hide_action')!==undefined?$hidee.data('hide_action'):'Hide',$newsToggle=void(0);if(obj.hasClass('show-hide-controller--closed')){if(obj.parent().hasClass('cb-news-browse-topics--compact')){$newsToggle=$('.cb-news-simple-search').find('.show-hide-controller')}else if(obj.parent().hasClass('cb-news-simple-search'))$newsToggle=$('.cb-news-browse-topics--compact').find('.show-hide-controller');if($newsToggle&&$newsToggle.hasClass('show-hide-controller--open')){$('#'+$newsToggle.attr('aria-controls')).toggle().attr('aria-hidden','true');$newsToggle.removeClass('show-hide-controller--open').addClass('show-hide-controller--closed').attr('aria-expanded','false')}};if(obj.data('animated'))$hidee.slideToggle(400);$hidee.toggle();if($hidee.attr('aria-hidden')==='true'){$hidee.attr('aria-hidden','false');$hidee.focus()}else{$hidee.attr('aria-hidden','true');obj.removeClass('show-hide-controller--open');obj.addClass('show-hide-controller--closed');obj.focus()};if(obj.attr('aria-expanded')==='true'){obj.attr('aria-expanded','false');obj.find('.show-hide__action').html(showAction)}else{obj.attr('aria-expanded','true');obj.removeClass('show-hide-controller--closed');obj.addClass('show-hide-controller--open');obj.find('.show-hide__action').html(hideAction)}}};Drupal.behaviors.cumctoggleExcess={attach:function attach(){$('.pane-cola-events-search-panel-pane-events-upcoming-main').once('hide-excess',function(){var $paragraph=$('.pane-cola-events-search-panel-pane-events-upcoming-main .field-name-body');$paragraph.each(function(index,element){if($(element).text().length>=600){var pText=$(element).text(),limit=pText.substring(0,500),excess=pText.slice(500,pText.length),splitWordPattern=/\S+$/,splitWord=splitWordPattern.exec(limit),$excess=$('<span>',{class:'excess'}).text(excess);if(splitWord){limit=limit.substring(0,limit.length-splitWord[0].length);$excess.prepend(splitWord)};if(excess.length){$(element).html('<span>'+limit+'</span>');$excess.clone().appendTo($(element))}}});if($('.excess').length){var mySettings=[{class_id:'.pane-cola-events-search-panel-pane-events-upcoming-main .excess',button_text:'',descriptor:'.col .field-name-field-event-date',descriptor_prefix:'about',closest:false,show_action:'Show more',hide_action:'Show less',before:false,animated:false}];Drupal.behaviors.cumcShowHide.initialize(mySettings)}})}};Drupal.behaviors.cumcaddAccordion={attach:function attach(){if(typeof Drupal.settings.addAccordion!=='undefined'){var mySettings=Drupal.settings.addAccordion;for(var i=0;i<mySettings.length;i++)$(mySettings[i].class_id).accordion({active:mySettings[i].active,collapsible:mySettings[i].collapsible})}}};Drupal.behaviors.cumcCarouselFocus={attach:function attach(){$('.cb-carousel').focusin(function(){$('.cb-carousel').addClass('has-focus')});$('.cb-carousel').focusout(function(){$('.cb-carousel').removeClass('has-focus')});$('.cb-gallery').focusin(function(e){if(!$(e.target).parent('.slick-dot').length)$(e.target).parents('.cb-gallery').addClass('has-focus')});$('.cb-gallery').focusout(function(e){$(e.target).parents('.cb-gallery').removeClass('has-focus')})}};Drupal.behaviors.cumcRegionOverlap={attach:function attach(){var parent=void(0),$regions=$('.region.cb-overlap');if($regions.length)$('body').once('region-overlap',function(){$regions.filter('.cb-overlap--top-and-bottom, .cb-overlap--top').each(function(index,region){parent=$(region).parents('div[class*=cb-feature-row]');if(parent.prev().length)parent.prev().addClass('cb-overlapped cb-overlapped--bottom')});$regions.filter('.cb-overlap--top-and-bottom, .cb-overlap--bottom').each(function(index,region){parent=$(region).parents('div[class*=cb-feature-row]');if(parent.next().length)parent.next().addClass('cb-overlapped cb-overlapped--top')})})}};Drupal.behaviors.cumcdominantColor={attach:function attach(){var _this=this;_this.settings={};var _settings=_this.settings;_settings.defaultRGB={r:113,g:117,b:122};_settings.imageComponent=$('.panels-ipe-hero').length?$('.panels-ipe-hero'):$('.pane-hero');_settings.blockSize=5;_settings.imageComponent.each(function(index,el){var $image=$(el).find('img').first(),regionBgAuto=$(el).parents('.region.cb-background--auto').length,onlyChild=$(el).parents('.cps-region-inner').children().length===1,$bgElement=$(el).parents('.region'),dominantColor=_this.rgbToString(_settings.defaultRGB);if(!$(el).parents('.region').length)if($(el).parents('.cb-feature-primary').length||$(el).parents('.cb-feature-secondary').length){$bgElement=$(el).parents('.cb-container__inner');regionBgAuto=true;onlyChild=$(el).siblings().length===0};if($image.length&&regionBgAuto&&onlyChild)$image.load(function(){dominantColor=_this.rgbToString(_this.getDominantColor($image));$bgElement.css('background',dominantColor)})})},rgbToString:function rgbToString(rgbObject){return'rgb('+rgbObject.r+', '+rgbObject.g+', '+rgbObject.b+')'},getDominantColor:function getDominantColor(imgObj){var _this=this,canvas=document.createElement('canvas'),context=canvas.getContext&&canvas.getContext('2d'),imgEl=imgObj.get(0),imgData=void(0),width=void(0),height=void(0),blockTotal=_this.settings.blockSize*4-4,rgb={r:0,g:0,b:0},blockCount=0;if(context){height=canvas.height=imgEl.naturalHeight||imgEl.offsetHeight||imgEl.height;width=canvas.width=imgEl.naturalWidth||imgEl.offsetWidth||imgEl.width;context.drawImage(imgEl,0,0);try{imgData=context.getImageData(0,0,width,height)}catch(e){return _this.settings.defaultRGB};while(blockTotal<imgData.data.length){rgb.r+=imgData.data[blockTotal];rgb.g+=imgData.data[blockTotal+1];rgb.b+=imgData.data[blockTotal+2];blockCount+=1;blockTotal+=_this.settings.blockSize*4};rgb.r=Math.floor(rgb.r/blockCount);rgb.g=Math.floor(rgb.g/blockCount);rgb.b=Math.floor(rgb.b/blockCount);if(rgb.r===0&&rgb.g===0&&rgb.b===0){rgb.r=42;rgb.g=43;rgb.b=45}}else rgb=_this.settings.defaultRGB;return rgb}}})(jQuery,Drupal);'use strict';(function jQueryScrollspy(window,$){$.fn.extend({scrollspy:function scrollspy(options,action){if(_isString(options)){var tempOptions=action;action=options;options=tempOptions};options=$.extend({},_defaults,options);_sanitizeOption(options,_defaults,'container',_isObject);var $container=$(options.container);if($container.length===0)return this;_sanitizeOption(options,_defaults,'namespace',_isString);if(_isString(action)&&action.toUpperCase()==='DESTROY'){$container.off('scroll.'+options.namespace);return this};_sanitizeOption(options,_defaults,'buffer',$.isNumeric);_sanitizeOption(options,_defaults,'max',$.isNumeric);_sanitizeOption(options,_defaults,'min',$.isNumeric);_sanitizeOption(options,_defaults,'onEnter',$.isFunction);_sanitizeOption(options,_defaults,'onLeave',$.isFunction);_sanitizeOption(options,_defaults,'onLeaveTop',$.isFunction);_sanitizeOption(options,_defaults,'onLeaveBottom',$.isFunction);_sanitizeOption(options,_defaults,'onTick',$.isFunction);if($.isFunction(options.max))options.max=options.max();if($.isFunction(options.min))options.min=options.min();var isVertical=window.String(options.mode).toUpperCase()==='VERTICAL';return this.each(function each(){var _this=this,$element=$(_this),enters=0,inside=false,leaves=0;$container.on('scroll.'+options.namespace,function onScroll(){var $this=$(this),position={top:$this.scrollTop(),left:$this.scrollLeft()},containerHeight=$container.height(),max=options.max,min=options.min,xAndY=isVertical?position.top+options.buffer:position.left+options.buffer;if(max===0)max=isVertical?containerHeight:$container.outerWidth()+$element.outerWidth();if(xAndY>=min&&xAndY<=max){if(!inside){inside=true;enters++;$element.trigger('scrollEnter',{position:position});if(options.onEnter!==null)options.onEnter(_this,position)};$element.trigger('scrollTick',{position:position,inside:inside,enters:enters,leaves:leaves});if(options.onTick!==null)options.onTick(_this,position,inside,enters,leaves)}else if(inside){inside=false;leaves++;$element.trigger('scrollLeave',{position:position,leaves:leaves});if(options.onLeave!==null)options.onLeave(_this,position);if(xAndY<=min){$element.trigger('scrollLeaveTop',{position:position,leaves:leaves});if(options.onLeaveTop!==null)options.onLeaveTop(_this,position)}else if(xAndY>=max){$element.trigger('scrollLeaveBottom',{position:position,leaves:leaves});if(options.onLeaveBottom!==null)options.onLeaveBottom(_this,position)}}else{var containerScrollTop=$container.scrollTop(),elementHeight=$element.height(),elementOffsetTop=$element.offset().top;if(elementOffsetTop<containerHeight+containerScrollTop&&elementOffsetTop>containerScrollTop-elementHeight){$element.trigger('scrollView',{position:position});if(options.onView!==null)options.onView(_this,position)}}})})}});var _defaults={buffer:0,container:window,max:0,min:0,mode:'vertical',namespace:'scrollspy',onEnter:null,onLeave:null,onLeaveTop:null,onLeaveBottom:null,onTick:null,onView:null}
function _isObject(value){return $.type(value)==='object'}
function _isString(value){return $.type(value)==='string'&&$.trim(value).length>0}
function _sanitizeOption(options,defaults,property,predicate){if(!predicate(options[property]))options[property]=defaults[property]}})(window,window.jQuery);;/*})'"*/
