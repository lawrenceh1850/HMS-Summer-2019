(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{0:function(t,e){t.exports=jQuery},1:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a={DOMAIN:statGlobal&&statGlobal.authDomain?statGlobal.authDomain:"",CLIENT_ID:statGlobal&&statGlobal.authClientId?statGlobal.authClientId:"",REDIRECT_URL:"https://"+window.location.host+"/wp-json/stat-paywall/v1/login",RESPONSE_TYPE:"code",TOKEN_KEY:"stat_paywall_token",PROFILE_KEY:"stat_paywall_profile",NEWSLETTERS_KEY:"stat_newsletters",INVOICES_KEY:"stat_invoices",CUSTOMER_KEY:"stat_customer",SUBSCRIPTION_KEY:"stat_subscription",CUSTOMER_ENDPOINT:"/wp-json/stat-paywall/v1/customer",SUBSCRIPTION_ENDPOINT:"/wp-json/stat-paywall/v1/subscription",INVOICES_ENDPOINT:"/wp-json/stat-paywall/v1/invoices",COUNT_PAID_INVOICES_ENDPOINT:"/wp-json/stat-paywall/v1/count-paid-invoices",COUPON_ENDPOINT:"/wp-json/stat-paywall/v1/coupon",PLAN_ENDPOINT:"/wp-json/stat-paywall/v1/plan",PLAN_GROUP_ENDPOINT:"/wp-json/stat-paywall/v1/plan-group",LOGIN_SOURCE:"stat_login_source",PROMO_CODE:"stat_promo_code",PLAN_GROUP:"stat_paywall_plan_group",SUCCESS:"stat_success",USER_META_ENDPOINT:"/wp-json/stat-paywall/v1/user-meta",USER_PROFILE_ENDPOINT:"/wp-json/stat-paywall/v1/user-profile",RESTRICTED_CONTENT_ENDPOINT:"/wp-json/stat-paywall/v1/restricted-content",EMAIL_ENDPOINT:"/wp-json/stat-paywall/v1/email",NEWSLETTERS_ENDPOINT:"/wp-json/stat-paywall/v1/newsletters",CONNECTIONS:{GOOGLE:"google-oauth2",FACEBOOK:"facebook",LINKEDIN:"linkedin",DATABASE:"Username-Password-Authentication"},ACCOUNT_LINK:statGlobal&&statGlobal.accountLink?statGlobal.accountLink:"/my-account/",ACCOUNT_LINK_CANCEL:statGlobal&&statGlobal.accountLink?statGlobal.accountLink+"cancel/":"/my-account/cancel/",ACCOUNT_LINK_EDIT:statGlobal&&statGlobal.accountLink?statGlobal.accountLink+"edit/":"/my-account/edit/",ACCOUNT_LINK_SUBSCRIBE:statGlobal&&statGlobal.accountLink?statGlobal.accountLink+"subscribe/":"/my-account/subscribe/",ACCOUNT_LINK_BILLING:statGlobal&&statGlobal.accountLink?statGlobal.accountLink+"billing/":"/my-account/billing/",LOGIN_LINK:statGlobal.loginLink?statGlobal.loginLink:"/login/",SUBSCRIBE_LINK:statGlobal.subscribeLink?statGlobal.subscribeLink:"/subscribe/",PAYWALL_ARCHIVE_LINK:statGlobal.paywallArchiveLink?statGlobal.paywallArchiveLink:"",PAYWALL_ARCHIVE_PUBLIC_LINK:statGlobal.paywallArchivePublicLink?statGlobal.paywallArchivePublicLink:"",TOKEN_TTL:1200}},11:function(t,e,n){var a,i;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(i="function"==typeof(a=o)?a.call(e,n,e,t):a)||(t.exports=i),!0,t.exports=o(),!!0){var s=window.Cookies,r=window.Cookies=o();r.noConflict=function(){return window.Cookies=s,r}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}return function e(n){function a(e,i,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=t({path:"/"},a.defaults,o)).expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*o.expires),o.expires=r}o.expires=o.expires?o.expires.toUTCString():"";try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(t){}i=n.write?n.write(i,e):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var u in o)o[u]&&(c+="; "+u,!0!==o[u]&&(c+="="+o[u]));return document.cookie=e+"="+i+c}e||(s={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<l.length;f++){var p=l[f].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var v=p[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,v):n(h,v)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(t){}if(e===v){s=h;break}e||(s[v]=h)}catch(t){}}return s}}return a.set=a,a.get=function(t){return a.call(a,t)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(e,n){a(e,"",t(n,{expires:-1}))},a.withConverter=e,a}(function(){})})},124:function(t,e,n){var a=n(125);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(a(t).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(e)}catch(t){return a(e)}}},125:function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,s=0,r=0,c="";o=e.charAt(r++);~o&&(i=s%4?64*i+o:o,s++%4)?c+=String.fromCharCode(255&i>>(-2*s&6)):0)o=n.indexOf(o);return c}},13:function(t,e){t.exports=statGlobal},134:function(t,e,n){"use strict";n.r(e);var a=n(46),i=n(74),o=n(0),s=n.n(o),r=n(3),c=n(1);function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"setCTALink",value:function(){var t=r.a.getIdToken()?"in":"out",e=s()("[data-stat-paywall-cta-logged-".concat(t,"]")),n=e.find(".widget-cta-inner");e.length&&n.length&&(e.attr("href","in"===t?c.a.PAYWALL_ARCHIVE_LINK:c.a.PAYWALL_ARCHIVE_PUBLIC_LINK),n.text(e.data("stat-paywall-cta-logged-".concat(t))))}},{key:"isPlusWidget",value:function(t){return 1===s()(t).find(".stat-plus-zone").length}},{key:"toggleWidgets",value:function(){r.a.getIdToken()?(s()(".home .stat-plus-cta-outer").hide(),s()(".home .stat-plus-zone-outer").show()):(s()(".home .stat-plus-zone-outer").hide(),s()(".home .stat-plus-cta-outer").show())}},{key:"init",value:function(){var t=this;s()(function(){t.setCTALink(),t.toggleWidgets()}),s()("body").on("stat-sidebar-item-placed",function(e,n){t.isPlusWidget(n)&&t.setCTALink()})}}])&&u(e.prototype,n),a&&u(e,a),t}());function d(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var f=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"setCTAWidget",value:function(){s()(".stat-plus-article-cta").length&&(r.a.getIdToken()?(s()(".stat-plus-article-cta-logged-in").show(),s()(".stat-plus-article-cta-logged-out").hide()):(s()(".stat-plus-article-cta-logged-in").hide(),s()(".stat-plus-article-cta-logged-out").show()))}},{key:"isCTAWidget",value:function(t){return s()(t).hasClass("stat-plus-article-cta")}},{key:"init",value:function(){var t=this;s()(function(){t.setCTAWidget()}),s()("body").on("stat-sidebar-item-placed",function(e,n){t.isCTAWidget(n)&&t.setCTAWidget()})}}])&&d(e.prototype,n),a&&d(e,a),t}());function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"init",value:function(){l.init(),f.init()}}])&&p(e.prototype,n),a&&p(e,a),t}());a.a.init(),i.a.init(),h.init(),0!==window.location.pathname.indexOf(c.a.LOGIN_LINK)&&0!==window.location.pathname.indexOf(c.a.SUBSCRIBE_LINK)||Promise.all([n.e(1),n.e(2),n.e(8)]).then(function(t){n(146).default.init()}.bind(null,n)).catch(n.oe),0===window.location.pathname.indexOf(c.a.ACCOUNT_LINK)&&0!==window.location.pathname.indexOf(c.a.ACCOUNT_LINK_CANCEL)&&Promise.all([n.e(1),n.e(3)]).then(function(t){n(175).default.init()}.bind(null,n)).catch(n.oe),0===window.location.pathname.indexOf(c.a.ACCOUNT_LINK_CANCEL)&&r.a.deleteCaches()},2:function(t,e,n){"use strict";var a=n(5);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"_hasStorage",value:function(){var t,e;try{e=new Date,(t=window.localStorage).setItem(e,e),t.getItem(e),String(e),t.removeItem(e)}catch(t){Object(a.noop)()}finally{return t||!1}}},{key:"set",value:function(t,e){var n=this._hasStorage();if(!n||!t)return!1;var a="string"==typeof e?e:JSON.stringify(e);try{n.setItem(t,a)}catch(t){return!1}return e}},{key:"get",value:function(t){var e,n=this._hasStorage();if(!n||!t)return!1;var a=n.getItem(t);if(a){try{e=JSON.parse(a)}catch(t){return!1}return e}return!1}},{key:"remove",value:function(t){var e=this._hasStorage();return!!e&&e.removeItem(t)}}])&&i(e.prototype,n),o&&i(e,o),t}());function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,"a",function(){return r});var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"get",value:function(t){return o.get(t)}},{key:"set",value:function(t,e){return o.set(t,e)}},{key:"delete",value:function(t){return o.remove(t)}}])&&s(e.prototype,n),a&&s(e,a),t}())},3:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return y});var a=n(0),i=n.n(a),o=n(11),s=n.n(o),r=n(73),c=n.n(r),u=n(8),l=n.n(u),d=n(1),f=n(2),p=n(13),h=n.n(p);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var y=new(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.isIdTokenImpersonated()&&this.deleteCaches()}var n,a,o;return n=e,(a=[{key:"getNewsletters",value:function(){var e,n,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e=f.a.get(d.a.NEWSLETTERS_KEY),new t(function(t,o){a&&e?t(e):i.a.get(d.a.NEWSLETTERS_ENDPOINT).done(function(e){f.a.set(d.a.NEWSLETTERS_KEY,e),t(e)}).fail(function(t,e,a){n=t.responseJSON||"".concat(e,": ").concat(a),f.a.set(d.a.NEWSLETTERS_KEY,n),o(n)})})}},{key:"getIdToken",value:function(){var t,e=s.a.get(d.a.TOKEN_KEY),n=Math.floor(Date.now()/1e3);if(void 0===e)return null;try{t=c()(e)}catch(t){return this.logout(),null}return t&&n>=t.exp?(this.logout(),null):t}},{key:"getId",value:function(){var t=this.getIdToken();return t&&t.sub?t.sub:null}},{key:"_getObject",value:function(e){var n,a,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=d.a[e.toUpperCase()+"_KEY"],c=f.a.get(r);return a=null===s?d.a[e.toUpperCase()+"_ENDPOINT"]:d.a[e.toUpperCase()+"_ENDPOINT"]+"/".concat(s),new t(function(t,s){o&&c?"object"===v(c)&&(e===c.object||"list"===c.object)?t(c):s(c):i.a.get(a).done(function(e){f.a.set(r,e),t(e)}).fail(function(t,e,a){n=t.responseJSON||"".concat(e,": ").concat(a),f.a.set(r,n),s(n)})})}},{key:"getCustomer",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getObject("customer",t&&this._isTokenFresh())}},{key:"getInvoices",value:function(){var e,n,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=d.a["invoices".toUpperCase()+"_KEY"],u=f.a.get(c);return(n=new l.a(d.a["invoices".toUpperCase()+"_ENDPOINT"])).query_set({limit:o,starting_after:s,ending_before:r}),new t(function(t,o){a&&u&&("object"===v(u)&&"list"===u.object)&&u._statEndpoint===n.to_string()?t(u):i.a.get(n.to_string()).done(function(e){e._statEndpoint=n.to_string(),f.a.set(c,e),t(e)}).fail(function(t,n,a){f.a.delete(c),e=t.responseJSON||"".concat(n,": ").concat(a),o(e)})})}},{key:"setPlanGroup",value:function(t,e){s.a.set(d.a.PLAN_GROUP,t,{expires:e})}},{key:"removePlanGroup",value:function(){s.a.remove(d.a.PLAN_GROUP)}},{key:"getPlanGroupName",value:function(){return s.a.get(d.a.PLAN_GROUP)}},{key:"getPlan",value:function(t){return this._getObject("plan",!1,t)}},{key:"getPlanGroup",value:function(t){return this._getObject("plan_group",!1,t)}},{key:"getProfile",value:function(){var e,n,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e=f.a.get(d.a.PROFILE_KEY),new t(function(t,o){a&&e?t(e):i.a.get(d.a.USER_PROFILE_ENDPOINT).done(function(e){f.a.set(d.a.PROFILE_KEY,e),t(e)}).fail(function(t,e,a){f.a.delete(d.a.PROFILE_KEY),n=t.responseJSON||"".concat(e,": ").concat(a),o(n)})})}},{key:"updateProfileCache",value:function(t){return f.a.set(d.a.PROFILE_KEY,t)}},{key:"hasSubscription",value:function(){var t=this.getSubscriptionStatus();return null!==t&&"canceled"!==t}},{key:"hasValidSubscription",value:function(){var t=this.getSubscriptionStatus();return t?"canceled"!==t&&"unpaid"!==t:null}},{key:"deleteCaches",value:function(){f.a.delete(d.a.PROFILE_KEY),f.a.delete(d.a.CUSTOMER_KEY),f.a.delete(d.a.SUBSCRIPTION_KEY),f.a.delete(d.a.INVOICES_KEY),f.a.delete(d.a.NEWSLETTERS_KEY)}},{key:"logout",value:function(){s.a.remove(d.a.TOKEN_KEY),this.deleteCaches()}},{key:"getRole",value:function(){var t=this.getIdToken();return t&&t.stat&&t.stat.role?t.stat.role:""}},{key:"getOrg",value:function(){var t=this.getIdToken();return t&&t.stat&&t.stat.org?t.stat.org:""}},{key:"hasRestrictedContentAccess",value:function(){return!!this.hasSubscription()||("staff"===this.getRole()||"vip"===this.getRole())}},{key:"_isTokenFresh",value:function(){var t=this.getIdToken();return!!t&&((!t.stat||"canceled"!==t.stat.subscription_status)&&(!(!t.stat||!t.stat.last_refresh)&&Math.round(Date.now()/1e3)-t.stat.last_refresh<d.a.TOKEN_TTL))}},{key:"isIdTokenImpersonated",value:function(){var t=this.getIdToken();return!!t&&!(!t.stat||!t.stat.impersonated)}},{key:"isIpRestricted",value:function(){return this.isGroupSubscriber()&&"ip_restricted"===this.getRole()}},{key:"_getCustomerId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getIdToken();return e?e.stat&&e.stat.customer_id?e.stat.customer_id:t&&t.app_metadata&&t.app_metadata.customer_id?t.app_metadata.customer_id:null:null}},{key:"_getSubscriptionId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getIdToken();return e?e.stat&&e.stat.subscription_id?e.stat.subscription_id:t&&t.app_metadata&&t.app_metadata.subscription_id?t.app_metadata.subscription_id:null:null}},{key:"isIndividualSubscriber",value:function(){return this.isCustomer()&&!this.isGroupSubscriber()&&!this.isGroupAdmin()}},{key:"isGroupSubscriber",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==this._getSubscriptionId(t)}},{key:"isGroupAdmin",value:function(){var t=this.getRole();return!(!t||"group_admin"!==t)}},{key:"isCustomer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==this._getCustomerId(t)}},{key:"getSubscription",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getObject("subscription",t&&this._isTokenFresh())}},{key:"getSubscriptionStatus",value:function(){var t=this.getIdToken(),e=t&&t.stat&&t.stat.subscription_status?t.stat.subscription_status:"";return e||null}},{key:"getName",value:function(t){var e="";return t.email!==t.name&&(e=t.name),t.user_metadata&&t.user_metadata.name&&(e=t.user_metadata.name),e}},{key:"changePassword",value:function(e){var n={client_id:d.a.CLIENT_ID,connection:d.a.CONNECTIONS.DATABASE,email:e};return t.resolve(i.a.post("https://"+d.a.DOMAIN+"/dbconnections/change_password",n))}},{key:"createCustomer",value:function(e){var n;return new t(function(t,a){i.a.post(d.a.CUSTOMER_ENDPOINT,e).done(function(e){f.a.set(d.a.CUSTOMER_KEY,e),f.a.set(d.a.SUBSCRIPTION_KEY,e.subscriptions.data[0]),t(e)}).fail(function(t,e,i){f.a.delete(d.a.CUSTOMER_KEY),f.a.delete(d.a.SUBSCRIPTION_KEY),n=t.responseJSON||"".concat(e,": ").concat(i),a(n)})})}},{key:"updateNewsletters",value:function(e){var n,a={type:"PUT",data:{newsletters:e}};return new t(function(t,e){i.a.ajax(d.a.NEWSLETTERS_ENDPOINT,a).done(function(e){f.a.set(d.a.NEWSLETTERS_KEY,e),t(e)}).fail(function(t,a,i){f.a.delete(d.a.NEWSLETTERS_KEY),n=t.responseJSON||"".concat(a,": ").concat(i),e(n)})})}},{key:"updateCustomer",value:function(e){var n,a={type:"PUT",data:e};return new t(function(t,e){i.a.ajax(d.a.CUSTOMER_ENDPOINT,a).done(function(e){f.a.set(d.a.CUSTOMER_KEY,e),f.a.set(d.a.SUBSCRIPTION_KEY,e.subscriptions.data[0]),t(e)}).fail(function(t,a,i){f.a.delete(d.a.CUSTOMER_KEY),f.a.delete(d.a.SUBSCRIPTION_KEY),n=t.responseJSON||"".concat(a,": ").concat(i),e(n)})})}},{key:"mergeEmail",value:function(){var e,n={type:"PATCH"};return new t(function(t,a){i.a.ajax(d.a.EMAIL_ENDPOINT,n).done(function(e){t(e)}).fail(function(t,n,i){e=t.responseJSON||"".concat(n,": ").concat(i),a(e)})})}},{key:"reactivateSubscription",value:function(){var e,n={type:"PATCH"};return new t(function(t,a){i.a.ajax(d.a.SUBSCRIPTION_ENDPOINT,n).done(function(e){f.a.set(d.a.CUSTOMER_KEY,e),f.a.set(d.a.SUBSCRIPTION_KEY,e.subscriptions.data[0]),t(e)}).fail(function(t,n,i){e=t.responseJSON||"".concat(n,": ").concat(i),a(e)})})}},{key:"updateUserMeta",value:function(e){var n,a={type:"PUT",data:e};return new t(function(t,e){i.a.ajax(d.a.USER_META_ENDPOINT,a).done(function(e){f.a.set(d.a.PROFILE_KEY,e),t(e)}).fail(function(t,a,i){f.a.delete(d.a.PROFILE_KEY),n=t.responseJSON||"".concat(a,": ").concat(i),e(n)})})}},{key:"updateEmail",value:function(e){var n,a={type:"PUT",data:{email:e}};return new t(function(t,e){i.a.ajax(d.a.EMAIL_ENDPOINT,a).done(function(e){f.a.set(d.a.PROFILE_KEY,e),t(e)}).fail(function(t,a,i){f.a.delete(d.a.PROFILE_KEY),n=t.responseJSON||"".concat(a,": ").concat(i),e(n)})})}},{key:"verifyEmail",value:function(e){var n,a={result_url:e};return new t(function(t,e){i.a.post(d.a.EMAIL_ENDPOINT,a).done(function(e){t(e)}).fail(function(t,a,i){n=t.responseJSON||"".concat(a,": ").concat(i),e(n)})})}},{key:"countPaidInvoices",value:function(){var e,n={count_trial_invoices:arguments.length>0&&void 0!==arguments[0]&&arguments[0],limit:arguments.length>1&&void 0!==arguments[1]?arguments[1]:10};return new t(function(t,a){i.a.get(d.a.COUNT_PAID_INVOICES_ENDPOINT,n).done(function(e){t(e)}).fail(function(t,n,i){e=t.responseJSON||"".concat(n,": ").concat(i),a(e)})})}},{key:"getCoupon",value:function(e){var n;return new t(function(t,a){i.a.get("".concat(d.a.COUPON_ENDPOINT,"/").concat(e)).done(function(e){t(e)}).fail(function(t,e,i){n=t.responseJSON||"".concat(e,": ").concat(i),a(n)})})}}])&&g(n.prototype,a),o&&g(n,o),e}());i()(window).on("stat-paywall-plan-group",function(t,e,n){y.setPlanGroup(e,n)}),h.a.user=y,jQuery(window).trigger("stat-paywall-user-ready")}).call(this,n(19))},46:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var a=n(0),i=n.n(a),o=n(11),s=n.n(o),r=n(8),c=n.n(r),u=n(1),l=n(3),d=n(12);function f(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var p=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$loginLinks=i()(),this.$subscribeLinks=i()(),this.$tryLinks=i()(),this.$archiveLinks=i()(),this.loginDefaults={href:"#",text:""},this.subscribeDefaults={href:"#",text:""},this.tryDefaults={href:"#",text:""}}var e,a,o;return e=t,(a=[{key:"setLoginLinks",value:function(){var t=l.a.getIdToken();t?this.setMenuLinks(this.$loginLinks,"Log Out","#",t):this.setMenuLinks(this.$loginLinks,this.loginDefaults.text,this.loginDefaults.href,t)}},{key:"setSubscribeLinks",value:function(){var t=l.a.getIdToken();t?(this.setMenuLinks(this.$subscribeLinks,"My Account",u.a.ACCOUNT_LINK,t),"unpaid"===l.a.getSubscriptionStatus()&&this.$subscribeLinks.addClass("icon-error")):(this.setMenuLinks(this.$subscribeLinks,this.subscribeDefaults.text,this.subscribeDefaults.href,t),this.$subscribeLinks.removeClass("icon-error"))}},{key:"setTryLinks",value:function(){var t=l.a.getIdToken();t?this.setMenuLinks(this.$tryLinks,"STAT Plus",u.a.PAYWALL_ARCHIVE_LINK,t):(this.setMenuLinks(this.$tryLinks,this.tryDefaults.text,this.tryDefaults.href,t),this.$tryLinks.attr("data-stat-paywall-cta",""))}},{key:"setMenuLinks",value:function(t,e,n,a){t.text(e).attr("href",n).parent().parent().parent().addClass("logged").removeClass(a?"out":"in").addClass(a?"in":"out")}},{key:"statPlusSubmenu",value:function(){l.a.getIdToken()?this.$archiveLinks.removeClass("no-toggle"):this.$archiveLinks.addClass("no-toggle")}},{key:"loginRedirect",value:function(t){window.location.href=t?u.a.SUBSCRIBE_LINK:u.a.LOGIN_LINK}},{key:"login",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setLoginSource(),n?(d.mainMenu.close(),this.initModal(e,function(){t.loginRedirect(e)})):this.loginRedirect(e)}},{key:"setLoginSource",value:function(){if(!this.isLoginPage()){var t=window.location.href;if(window.location.pathname===u.a.PAYWALL_ARCHIVE_PUBLIC_LINK)t=window.location.protocol+"//"+window.location.host+u.a.PAYWALL_ARCHIVE_LINK;s.a.set(u.a.LOGIN_SOURCE,t,{expires:1})}}},{key:"logout",value:function(){l.a.logout(),this.isMyAccountPage()?window.location.href="https://auth.statnews.com/v2/logout?returnTo=https://".concat(window.location.host,"/&client_id=").concat(u.a.CLIENT_ID):window.location.reload()}},{key:"isMyAccountPage",value:function(){return 0===window.location.pathname.indexOf(u.a.ACCOUNT_LINK)}},{key:"isLoginPage",value:function(){return 0===window.location.pathname.indexOf(u.a.LOGIN_LINK)||0===window.location.pathname.indexOf(u.a.SUBSCRIBE_LINK)}},{key:"useModal",value:function(t){return i()(t.currentTarget).parent().hasClass("modal")&&!this.isLoginPage()}},{key:"setArchiveLinks",value:function(){var t="";t=l.a.getIdToken()?u.a.PAYWALL_ARCHIVE_LINK:u.a.PAYWALL_ARCHIVE_PUBLIC_LINK,this.$archiveLinks.length&&t&&this.$archiveLinks.attr("href",t)}},{key:"setLinkDefaults",value:function(){this.$loginLinks.length&&(this.loginDefaults.href=this.$loginLinks.first().attr("href"),this.loginDefaults.text=this.$loginLinks.first().text()),this.$subscribeLinks.length&&(this.subscribeDefaults.href=this.$subscribeLinks.first().attr("href"),this.subscribeDefaults.text=this.$subscribeLinks.first().text()),this.$tryLinks.length&&(this.tryDefaults.href=this.$tryLinks.first().attr("href"),this.tryDefaults.text=this.$tryLinks.first().text())}},{key:"initModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;Promise.all([n.e(1),n.e(2),n.e(12)]).then(function(a){n(138).default.init(t).then(function(){i()("body").trigger("stat-paywall-modal-impression",[t])}).catch(function(){e()})}.bind(null,n)).catch(e)}},{key:"getPromoFromLink",value:function(t){return new c.a(t.attr("href")).query_get(u.a.PROMO_CODE)}},{key:"init",value:function(){var t=this;document.addEventListener("DOMContentLoaded",function(){t.$loginLinks=i()(".stat-paywall-login > a"),t.$subscribeLinks=i()(".stat-paywall-subscribe > a"),t.$tryLinks=i()(".stat-paywall-try > a"),t.$archiveLinks=i()(".stat-paywall-archive > a"),t.setLinkDefaults(),t.statPlusSubmenu(),t.setLoginLinks(),t.setSubscribeLinks(),t.setTryLinks(),t.setArchiveLinks(),t.$loginLinks.click(function(e){e.preventDefault(),l.a.getIdToken()?t.logout():t.login(!1,t.useModal(e))}),t.$subscribeLinks.click(function(e){l.a.getIdToken()||(e.preventDefault(),t.login(!0,t.useModal(e)))}),i()("body").on("click","a[data-stat-login], a[data-stat-subscribe]",function(e){e.preventDefault();var n=i()(e.currentTarget),a=void 0!==n.attr("data-stat-subscribe"),o=a?"modal"===n.attr("data-stat-subscribe"):"modal"===n.attr("data-stat-login");if(o){var r=t.getPromoFromLink(n);r&&s.a.set(u.a.PROMO_CODE,r,{expires:7})}t.login(a,o)})})}}])&&f(e.prototype,a),o&&f(e,o),t}())},5:function(t,e){t.exports=_},73:function(t,e,n){"use strict";var a=n(124);function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new i("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(a(t.split(".")[n]))}catch(t){throw new i("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=i},74:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return l});var a=n(0),i=n.n(a),o=n(1),s=n(3),r=n(13),c=n.n(r);function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=new(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._contentReady=null,this._domReady=null,this.restrictedContent="",this.hasAccess=s.a.hasRestrictedContentAccess()&&!s.a.isIpRestricted()}var n,a,r;return n=e,(a=[{key:"isRestrictedPost",value:function(){return c.a.postId&&"1"===c.a.restricted}},{key:"maybeSetNonceHeader",value:function(t){c.a.apiNonce&&t.setRequestHeader("X-WP-Nonce",c.a.apiNonce)}},{key:"maybeFetchRestrictedContent",value:function(){return this.isRestrictedPost()&&s.a.getIdToken()&&this.hasAccess?t.resolve(i.a.ajax(o.a.RESTRICTED_CONTENT_ENDPOINT+"/"+c.a.postId+window.location.search,{beforeSend:this.maybeSetNonceHeader})):t.reject()}},{key:"displayRestrictedContent",value:function(t){var e=i()(".restricted-content-breaker"),n=e.find(".restricted-content-wrapper");e.length&&(this.initDropdownEvents(e),s.a.getIdToken()&&((!this.hasAccess||t&&t.status&&403===t.status)&&(n.addClass("info"),this.setNotSubscribedMessage(e)),"unpaid"===s.a.getSubscriptionStatus()&&(n.addClass("error"),this.setUnpaidMessage(e)),s.a.isIpRestricted()&&(n.addClass("warning"),this.setIpRestrictedMessage(e))),this.restrictedContent?(e.replaceWith(this.restrictedContent),i()(".restricted .content-meta").show()):e.show()),i.a.holdReady(!1)}},{key:"initDropdownEvents",value:function(t){t.find(".restricted-content-learn-more").on("click",function(e){e.preventDefault(),t.hasClass("is-active")?t.removeClass("is-active"):t.addClass("is-active")}),t.find(".restricted-dropdown-close").on("click",function(e){t.removeClass("is-active")})}},{key:"setNotSubscribedMessage",value:function(t){var e=t.find(".restricted-content-message");e.length&&e.html('\n\t\t\t\t\t<p class="restricted-content-text">\n\t\t\t\t\t\tThis article is only available to STAT Plus subscribers.\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\tTo complete your subscription, <a href="'.concat(o.a.ACCOUNT_LINK,'subscribe/" data-stat-paywall-cta>click here</a>.\n\t\t\t\t\t</p>\n\t\t\t\t'))}},{key:"setUnpaidMessage",value:function(t){var e=t.find(".restricted-content-message");if(e.length)if(s.a.isGroupAdmin())e.html('\n\t\t\t\t\t<p class="restricted-content-text">\n\t\t\t\t\tThe STAT Plus contract for your group has ended. Please email <a href="mailto:subscribers@statnews.com">subscribers@statnews.com</a> to learn about renewal options and reactivating the subscription.\n\t\t\t\t\t</p>\n\t\t\t\t\t');else if(s.a.isGroupSubscriber()){var n="Please email your group administrator",a='\n\t\t\t\t\t\t\t<p class="restricted-content-text">\n\t\t\t\t\t\t\t\tThe STAT Plus contract for your group has ended. '.concat(n,', or to re-subscribe as an individual, email <a href="mailto:subscribers@statnews.com">subscribers@statnews.com</a>.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t');s.a.getSubscription().then(function(t){if(t.metadata.group_admin){var i=t.metadata.group_contact?t.metadata.group_contact:t.metadata.group_admin;a=a.replace(n,"".concat(n,': <a href="mailto:').concat(i,'">').concat(i,"</a>"))}e.html(a)}).catch(function(){e.html(a)})}else e.html('\n\t\t\t\t\t\t<p class="restricted-content-text">\n\t\t\t\t\t\t\tYour STAT Plus subscription is currently inactive due to a failed payment.\n\t\t\t\t\t\t\tPlease <a href="'.concat(o.a.ACCOUNT_LINK,'">update your payment information</a>.\n\t\t\t\t\t\t\tFor assistance, please email <a href="mailto:subscribers@statnews.com">subscribers@statnews.com</a>.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t'))}},{key:"setIpRestrictedMessage",value:function(t){var e=t.find(".restricted-content-message");e.length&&e.html('\n\t\t\t\t\t<p class="restricted-content-text">\n\t\t\t\t\t\tYour STAT Plus group membership is currently inactive because we detected that you logged in from a restricted IP address.\n\t\t\t\t\t\tPlease log out and back in from an authorized network. If you no longer have access to your organization\'s network, please <a href="'.concat(o.a.ACCOUNT_LINK_SUBSCRIBE,'">sign up for an invididual subscription</a> to regain access.\n\t\t\t\t\t\tFor assistance, please email your <a href="').concat(o.a.ACCOUNT_LINK,'">group adminstrator</a>.\n\t\t\t\t\t</p>\n\t\t\t\t'))}},{key:"maybeHideComments",value:function(){this.isRestrictedPost()&&null===s.a.getIdToken()&&i()(".single.restricted .comments-section").hide()}},{key:"init",value:function(){var e=this;this.isRestrictedPost()&&(this._contentReady=this.maybeFetchRestrictedContent(),this._domReady=new t(function(t,e){document.addEventListener("DOMContentLoaded",function(){t()})}),this._domReady.then(function(){e.maybeHideComments()}),t.all([this._domReady,this._contentReady]).then(function(t){e.restrictedContent=t[1].restricted_content,e.displayRestrictedContent()}).catch(function(t){e._domReady.then(function(){e.displayRestrictedContent(t)})}))}}])&&u(n.prototype,a),r&&u(n,r),e}());c.a.restrictedContent=l}).call(this,n(19))}},[[134,0]]]);